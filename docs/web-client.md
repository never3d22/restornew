# –í–µ–±-–∫–ª–∏–µ–Ω—Ç RestorNew (React + Vite)

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä–Ω—É—é –≤–µ—Ä—Å–∏—é RestorNew. –û–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ tRPC-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, —á—Ç–æ –∏ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–æ—ç—Ç–æ–º—É backend –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://roteelonoogu.beget.app/trpc`).

## 1. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥ `web/` –∏ —Å–æ–∑–¥–∞–π—Ç–µ `.env`:
   ```bash
   cd web
   cp .env.example .env
   ```
2. –£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å API –≤ `.env` (–ª–æ–∫–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `http://127.0.0.1:3000/trpc`):
   ```env
   VITE_API_URL=http://127.0.0.1:3000/trpc
   ```
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ Vite:
   ```bash
   npm install
   npm run dev -- --host 0.0.0.0 --port 5173
   ```
4. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:5173` (–∏–ª–∏ `http://<IP>:5173`, –µ—Å–ª–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞). –í —à–∞–ø–∫–µ –µ—Å—Ç—å –±–ª–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ SMS –∏ –ø–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –∞–¥–º–∏–Ω-—Å–µ–∫—Ä–µ—Ç–∞.

## 2. –°–±–æ—Ä–∫–∞ production-–±–∞–Ω–¥–ª–∞

1. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```bash
   npm run build
   ```
   –í –∫–∞—Ç–∞–ª–æ–≥–µ `web/dist/` –ø–æ—è–≤—è—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã.
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–±—Ä–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –ª–æ–∫–∞–ª—å–Ω–æ:
   ```bash
   npm run preview -- --host 0.0.0.0 --port 4173
   ```
   –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:4173`.

## 3. –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ beget.com

–ù–∏–∂–µ –ø—Ä–∏–º–µ—Ä –¥–µ–ø–ª–æ—è –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ, –≥–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç backend. –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –ª–µ–∂–∞—Ç –≤ `/var/www/html/restornew/web` –∏ —É –≤–∞—Å —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–æ–º–µ–Ω `roteelonoogu.beget.app` –¥–ª—è API.

1. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ `.env` –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   cd /var/www/html/restornew/web
   cp .env.example .env
   nano .env               # VITE_API_URL=https://roteelonoogu.beget.app/trpc
   npm install
   npm run build
   ```
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –æ—Ç–∫—É–¥–∞ Nginx –±—É–¥–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å —Å—Ç–∞—Ç–∏–∫—É:
   ```bash
   mkdir -p /var/www/html/web-dist
   cp -r dist/* /var/www/html/web-dist/
   ```
3. –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –ø–æ–¥–¥–æ–º–µ–Ω –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞—Ç—å API. –ù–∞–ø—Ä–∏–º–µ—Ä, `app.roteelonoogu.beget.app`:
   ```bash
   sudo tee /etc/nginx/sites-available/app.roteelonoogu.beget.app >/dev/null <<'EOF'
   server {
     listen 80;
     server_name app.roteelonoogu.beget.app;

     root /var/www/html/web-dist;
     index index.html;

     location / {
       try_files $uri /index.html;
     }
   }
   EOF

   sudo ln -sf /etc/nginx/sites-available/app.roteelonoogu.beget.app /etc/nginx/sites-enabled/app.roteelonoogu.beget.app
   sudo nginx -t
   sudo systemctl reload nginx
   ```
   –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://app.roteelonoogu.beget.app`. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ HTTPS —á–µ—Ä–µ–∑ Certbot –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
4. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å —Ç–æ–≥–æ –∂–µ –¥–æ–º–µ–Ω–∞, —á—Ç–æ –∏ API, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—É—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/app`) –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π `base` –≤ Vite. –í —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ—â–µ –¥–µ—Ä–∂–∞—Ç—å API –Ω–∞ `roteelonoogu.beget.app`, –∞ –≤–µ–±-–∫–ª–∏–µ–Ω—Ç –Ω–∞ –ø–æ–¥–¥–æ–º–µ–Ω–µ.

## 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏

1. –û–±–Ω–æ–≤–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (`git pull`).
2. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Å–±–æ—Ä–∫—É: `npm install` (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏) –∏ `npm run build`.
3. –ü–µ—Ä–µ–∫–æ–ø–∏—Ä—É–π—Ç–µ `dist/*` –≤ `/var/www/html/web-dist/`.
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ `npm run preview` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –µ–≥–æ) –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Nginx –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤.

## 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

- `curl -I https://app.roteelonoogu.beget.app` ‚Äî –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `200 OK`.
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∏ –æ—Ñ–æ—Ä–º–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑.
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –∫ tRPC —É—Ö–æ–¥—è—Ç –Ω–∞ `https://roteelonoogu.beget.app/trpc` (–≤–∏–¥–Ω–æ –≤ DevTools ‚Üí Network).

> üí° –ê–¥–º–∏–Ω-—Å–µ–∫—Ä–µ—Ç –Ω–∏–≥–¥–µ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫–æ–¥–µ ‚Äî –≤–≤–æ–¥–∏—Ç–µ –µ–≥–æ –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—Ö–æ–¥–µ. –ï—Å–ª–∏ —Å–µ–∫—Ä–µ—Ç –º–µ–Ω—è–µ—Ç—Å—è, –æ–±–Ω–æ–≤–∏—Ç–µ –∏ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∏ –±—Ä–∞—É–∑–µ—Ä–Ω—É—é –≤–µ—Ä—Å–∏—é.
