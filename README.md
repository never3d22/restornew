# RestorNew ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ–Ω–ª–∞–π–Ω-–∑–∞–∫–∞–∑–∞ –µ–¥—ã

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–µ–Ω—é, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç API –Ω–∞ Hono/tRPC + Drizzle/MySQL –∏ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Expo/React Native —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–µ—Ä–µ–∑ Zustand –∏ React Query.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
backend/  ‚Äî Hono + tRPC API, Drizzle ORM, –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥—ã
mobile/   ‚Äî Expo-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (iOS, Android, Web) –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –∞–¥–º–∏–Ω–æ–≤
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ–Ω—é –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.
- üõí –ö–æ—Ä–∑–∏–Ω–∞ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–∑–∏—Ü–∏–π –∏ –ø–æ–¥—Å—á–µ—Ç–æ–º —Å—É–º–º—ã.
- üì¶ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏.
- üè† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏.
- üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ SMS-–∫–æ–¥—É (—Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥ 1234).

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
- üìö –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –±–ª—é–¥ —á–µ—Ä–µ–∑ tRPC-–º–µ—Ç–æ–¥—ã.
- üì¶ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤ —Å —Å–æ—Å—Ç–∞–≤–æ–º –∏ —Å—É–º–º–æ–π.
- üîÅ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤ (pending ‚Üí confirmed/delivered/cancelled).
- üîë –î–æ—Å—Ç—É–ø –∑–∞—â–∏—â–µ–Ω –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `x-admin-secret` (—Å–º. –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è).

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö MySQL. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –ø–æ SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä (`ssh root@185.207.0.192`) –∏ —É–∂–µ **–Ω–∞ —Å–∞–º–æ–º —Å–µ—Ä–≤–µ—Ä–µ** –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∏–∂–µ. –í–Ω–µ—à–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MySQL –∑–∞–∫—Ä—ã—Ç—ã, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `localhost`. –ù–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ root –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `unix_socket`, –ø–æ—ç—Ç–æ–º—É —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –∫–æ–Ω—Å–æ–ª—å –±–µ–∑ –ø–∞—Ä–æ–ª—è:
   ```bash
   sudo mysql
   ```
   –í–Ω—É—Ç—Ä–∏ –æ–±–æ–ª–æ—á–∫–∏ MySQL —Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –∏ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   ```sql
   CREATE DATABASE IF NOT EXISTS restornew CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   CREATE USER IF NOT EXISTS 'restornew'@'%' IDENTIFIED BY 'restornew-password';
   GRANT ALL PRIVILEGES ON restornew.* TO 'restornew'@'%';
   FLUSH PRIVILEGES;
   ```
   –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –≤—Ö–æ–¥ –ø–æ–¥ `root` —Å –ø–∞—Ä–æ–ª–µ–º, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'your-password';` –∏ –∑–∞—Ç–µ–º –≤—ã—Ö–æ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥–æ–π `exit;`.
2. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   cd backend && npm install
   cd ../mobile && npm install
   ```
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –≤ –∫–∞–∂–¥–æ–º –ø–∞–∫–µ—Ç–µ –∏ –ø—Ä–æ–ø–∏—à–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:
   - `backend/.env`
     ```env
   DATABASE_URL=mysql://restornew:restornew-password@127.0.0.1:3306/restornew
    ADMIN_SECRET=super-secret
    PORT=3000
    ```
   - `mobile/.env`
     ```env
     EXPO_PUBLIC_API_URL=http://185.207.0.192:3000/trpc
     EXPO_PUBLIC_ADMIN_SECRET=super-secret
     ```
   –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —É–∫–∞–∑–∞–≤ `localhost` –≤–º–µ—Å—Ç–æ –≤–Ω–µ—à–Ω–µ–≥–æ IP.
4. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ —Å—Ö–µ–º—É/—Å–∏–¥—ã:
   ```bash
   cd backend
   npm run db:push
   npm run db:seed
   ```
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ API:
   ```bash
   npm run dev
   # API –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost:3000 (–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π PORT), tRPC –Ω–∞ /trpc
   ```
   –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª—É—à–∞–µ—Ç –Ω–∞ `0.0.0.0`, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç `3000` –æ—Ç–∫—Ä—ã—Ç –≤ —Ñ–∞–µ—Ä–≤–æ–ª–µ.
6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Expo-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
   ```bash
   cd mobile
   npm run start
   ```
Expo Dev Tools –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ iOS/Android —Å–∏–º—É–ª—è—Ç–æ—Ä–µ, –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏–ª–∏ –≤ –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä–µ.

## –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

- –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ backend –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `http://roteelonoogu.beget.app:3000/` (–∏–ª–∏ —Å –≤–∞—à–∏–º –¥–æ–º–µ–Ω–æ–º/–ø–æ—Ä—Ç–æ–º). –û–Ω–∞ –≤—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç—É—Å API –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ `http://roteelonoogu.beget.app:3000/health`.
- tRPC-—ç–Ω–¥–ø–æ–∏–Ω—Ç —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –Ω–∞ `http://roteelonoogu.beget.app:3000/trpc`. –î–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ devtools (–Ω–∞–ø—Ä–∏–º–µ—Ä, [tRPC Panel](https://github.com/jlalmes/trpc-panel)) –∏–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç.
- –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Ç–æ—Ç –∂–µ URL —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `EXPO_PUBLIC_API_URL`.

## –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã tRPC

| –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| `menu.list` | –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –±–ª—é–¥–∞–º–∏. |
| `orders.create` | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞. |
| `orders.history` | –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞. |
| `addresses.*` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏. |
| `auth.requestCode` | –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ SMS-–∫–æ–¥–∞ (–ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å). |
| `auth.verifyCode` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–æ–¥–∞, —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. |
| `admin.*` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏, –±–ª—é–¥–∞–º–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∑–∞–∫–∞–∑–æ–≤ (—á–µ—Ä–µ–∑ `x-admin-secret`). |

## SMS –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SMS.ru –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –∑–∞–≥–ª—É—à–∫–æ–π: –∫–æ–¥ –≤—Å–µ–≥–¥–∞ `1234`, –∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞. –õ–æ–≥–∏–∫—É –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å, –∑–∞–º–µ–Ω–∏–≤ `auth.requestCode` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ API SMS.ru.

## –†–∞–∑–≤–∏—Ç–∏–µ

- üí≥ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —à–ª—é–∑–∞ –∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –æ–ø–ª–∞—Ç—ã.
- üîî Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –∫—É—Ä—å–µ—Ä–æ–≤.
- üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (Prometheus, Sentry).
- üß™ –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã (unit + e2e) –∏ CI/CD –Ω–∞ beget –∏–ª–∏ GitHub Actions.

## –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä beget.com

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –ø–æ SFTP –∫ `185.207.0.192:22` —Å —É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ `root` / `i*2ubUF7LOaG` –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ –∫–∞—Ç–∞–ª–æ–≥ `/var/www/html` (backend —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤ `/var/www/html/backend`).
2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —à–∞–≥–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è¬ª (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ `.env`, –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥—ã).
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ API –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∏–ª–∏ —á–µ—Ä–µ–∑ `pm2`:
   ```bash
   cd /var/www/html/backend
   npm run build
   node dist/index.js
   ```
4. –î–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–ø–∏—à–∏—Ç–µ –≤ `.env` –ø—É–±–ª–∏—á–Ω—ã–π URL API (`http://185.207.0.192:3000/trpc`) –∏ —Å–æ–±–µ—Ä–∏—Ç–µ –±–∏–ª–¥ —á–µ—Ä–µ–∑ Expo.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –í—ã –º–æ–∂–µ—Ç–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –ø–æ–¥ –Ω—É–∂–¥—ã —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞, —Ä–∞—Å—à–∏—Ä—è—Ç—å —Å—Ö–µ–º—É –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã.
